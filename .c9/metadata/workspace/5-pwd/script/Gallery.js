{"filter":false,"title":"Gallery.js","tooltip":"/5-pwd/script/Gallery.js","undoManager":{"mark":100,"position":100,"stack":[[{"group":"doc","deltas":[{"start":{"row":10,"column":1},"end":{"row":10,"column":2},"action":"insert","lines":["/"]}]}],[{"group":"doc","deltas":[{"start":{"row":8,"column":5},"end":{"row":8,"column":6},"action":"remove","lines":["/"]}]}],[{"group":"doc","deltas":[{"start":{"row":8,"column":4},"end":{"row":8,"column":5},"action":"remove","lines":["/"]}]}],[{"group":"doc","deltas":[{"start":{"row":8,"column":4},"end":{"row":8,"column":16},"action":"remove","lines":["console.log("]}]}],[{"group":"doc","deltas":[{"start":{"row":8,"column":32},"end":{"row":8,"column":33},"action":"remove","lines":[")"]}]}],[{"group":"doc","deltas":[{"start":{"row":8,"column":30},"end":{"row":8,"column":31},"action":"remove","lines":["w"]}]}],[{"group":"doc","deltas":[{"start":{"row":8,"column":29},"end":{"row":8,"column":30},"action":"remove","lines":["o"]}]}],[{"group":"doc","deltas":[{"start":{"row":8,"column":28},"end":{"row":8,"column":29},"action":"remove","lines":["d"]}]}],[{"group":"doc","deltas":[{"start":{"row":8,"column":27},"end":{"row":8,"column":28},"action":"remove","lines":["n"]}]}],[{"group":"doc","deltas":[{"start":{"row":8,"column":26},"end":{"row":8,"column":27},"action":"remove","lines":["i"]}]}],[{"group":"doc","deltas":[{"start":{"row":8,"column":25},"end":{"row":8,"column":26},"action":"remove","lines":["w"]}]}],[{"group":"doc","deltas":[{"start":{"row":8,"column":24},"end":{"row":8,"column":25},"action":"remove","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":8,"column":23},"end":{"row":8,"column":24},"action":"remove","lines":[","]}]}],[{"group":"doc","deltas":[{"start":{"row":6,"column":4},"end":{"row":6,"column":28},"action":"remove","lines":["this.newGallery(window);"]}]}],[{"group":"doc","deltas":[{"start":{"row":8,"column":25},"end":{"row":9,"column":0},"action":"insert","lines":["",""]},{"start":{"row":9,"column":0},"end":{"row":9,"column":4},"action":"insert","lines":["    "]}]}],[{"group":"doc","deltas":[{"start":{"row":9,"column":4},"end":{"row":9,"column":28},"action":"insert","lines":["this.newGallery(window);"]}]}],[{"group":"doc","deltas":[{"start":{"row":4,"column":4},"end":{"row":4,"column":7},"action":"insert","lines":["// "]},{"start":{"row":5,"column":4},"end":{"row":5,"column":7},"action":"insert","lines":["// "]}]}],[{"group":"doc","deltas":[{"start":{"row":15,"column":4},"end":{"row":15,"column":5},"action":"insert","lines":["/"]}]}],[{"group":"doc","deltas":[{"start":{"row":15,"column":5},"end":{"row":15,"column":6},"action":"insert","lines":["/"]}]}],[{"group":"doc","deltas":[{"start":{"row":12,"column":57},"end":{"row":13,"column":0},"action":"insert","lines":["",""]},{"start":{"row":13,"column":0},"end":{"row":13,"column":4},"action":"insert","lines":["    "]}]}],[{"group":"doc","deltas":[{"start":{"row":13,"column":0},"end":{"row":13,"column":4},"action":"remove","lines":["    "]}]}],[{"group":"doc","deltas":[{"start":{"row":12,"column":57},"end":{"row":13,"column":0},"action":"remove","lines":["",""]}]}],[{"group":"doc","deltas":[{"start":{"row":11,"column":63},"end":{"row":12,"column":0},"action":"insert","lines":["",""]}]}],[{"group":"doc","deltas":[{"start":{"row":12,"column":0},"end":{"row":13,"column":0},"action":"insert","lines":["",""]}]}],[{"group":"doc","deltas":[{"start":{"row":13,"column":0},"end":{"row":14,"column":0},"action":"insert","lines":["",""]}]}],[{"group":"doc","deltas":[{"start":{"row":13,"column":0},"end":{"row":13,"column":1},"action":"insert","lines":["N"]}]}],[{"group":"doc","deltas":[{"start":{"row":13,"column":1},"end":{"row":13,"column":2},"action":"insert","lines":["S"]}]}],[{"group":"doc","deltas":[{"start":{"row":13,"column":2},"end":{"row":13,"column":3},"action":"insert","lines":["."]}]}],[{"group":"doc","deltas":[{"start":{"row":13,"column":3},"end":{"row":13,"column":4},"action":"insert","lines":["G"]}]}],[{"group":"doc","deltas":[{"start":{"row":13,"column":4},"end":{"row":13,"column":5},"action":"insert","lines":["a"]}]}],[{"group":"doc","deltas":[{"start":{"row":13,"column":5},"end":{"row":13,"column":6},"action":"insert","lines":["l"]}]}],[{"group":"doc","deltas":[{"start":{"row":13,"column":6},"end":{"row":13,"column":7},"action":"insert","lines":["l"]}]}],[{"group":"doc","deltas":[{"start":{"row":13,"column":7},"end":{"row":13,"column":8},"action":"insert","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":13,"column":8},"end":{"row":13,"column":9},"action":"insert","lines":["r"]}]}],[{"group":"doc","deltas":[{"start":{"row":13,"column":3},"end":{"row":13,"column":9},"action":"remove","lines":["Galler"]},{"start":{"row":13,"column":3},"end":{"row":13,"column":18},"action":"insert","lines":["GalleryWindow()"]}]}],[{"group":"doc","deltas":[{"start":{"row":13,"column":17},"end":{"row":13,"column":18},"action":"remove","lines":[")"]}]}],[{"group":"doc","deltas":[{"start":{"row":13,"column":16},"end":{"row":13,"column":17},"action":"remove","lines":["("]}]}],[{"group":"doc","deltas":[{"start":{"row":13,"column":16},"end":{"row":13,"column":17},"action":"insert","lines":["."]}]}],[{"group":"doc","deltas":[{"start":{"row":13,"column":17},"end":{"row":13,"column":18},"action":"insert","lines":["B"]}]}],[{"group":"doc","deltas":[{"start":{"row":13,"column":18},"end":{"row":13,"column":19},"action":"insert","lines":["o"]}]}],[{"group":"doc","deltas":[{"start":{"row":13,"column":19},"end":{"row":13,"column":20},"action":"insert","lines":["d"]}]}],[{"group":"doc","deltas":[{"start":{"row":13,"column":20},"end":{"row":13,"column":21},"action":"insert","lines":["y"]}]}],[{"group":"doc","deltas":[{"start":{"row":13,"column":17},"end":{"row":13,"column":18},"action":"remove","lines":["B"]}]}],[{"group":"doc","deltas":[{"start":{"row":13,"column":17},"end":{"row":13,"column":18},"action":"insert","lines":["b"]}]}],[{"group":"doc","deltas":[{"start":{"row":13,"column":21},"end":{"row":13,"column":22},"action":"insert","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":13,"column":22},"end":{"row":13,"column":23},"action":"insert","lines":["="]}]}],[{"group":"doc","deltas":[{"start":{"row":13,"column":23},"end":{"row":13,"column":24},"action":"insert","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":13,"column":24},"end":{"row":13,"column":25},"action":"insert","lines":["f"]}]}],[{"group":"doc","deltas":[{"start":{"row":13,"column":25},"end":{"row":13,"column":26},"action":"insert","lines":["u"]}]}],[{"group":"doc","deltas":[{"start":{"row":13,"column":26},"end":{"row":13,"column":27},"action":"insert","lines":["n"]}]}],[{"group":"doc","deltas":[{"start":{"row":13,"column":27},"end":{"row":13,"column":28},"action":"insert","lines":["c"]}]}],[{"group":"doc","deltas":[{"start":{"row":13,"column":28},"end":{"row":13,"column":29},"action":"insert","lines":["t"]}]}],[{"group":"doc","deltas":[{"start":{"row":13,"column":29},"end":{"row":13,"column":30},"action":"insert","lines":["i"]}]}],[{"group":"doc","deltas":[{"start":{"row":13,"column":30},"end":{"row":13,"column":31},"action":"insert","lines":["o"]}]}],[{"group":"doc","deltas":[{"start":{"row":13,"column":31},"end":{"row":13,"column":32},"action":"insert","lines":["n"]}]}],[{"group":"doc","deltas":[{"start":{"row":13,"column":32},"end":{"row":13,"column":34},"action":"insert","lines":["()"]}]}],[{"group":"doc","deltas":[{"start":{"row":13,"column":34},"end":{"row":13,"column":35},"action":"insert","lines":[";"]}]}],[{"group":"doc","deltas":[{"start":{"row":13,"column":33},"end":{"row":14,"column":0},"action":"insert","lines":["",""]},{"start":{"row":14,"column":0},"end":{"row":14,"column":4},"action":"insert","lines":["    "]}]}],[{"group":"doc","deltas":[{"start":{"row":14,"column":0},"end":{"row":14,"column":4},"action":"remove","lines":["    "]}]}],[{"group":"doc","deltas":[{"start":{"row":13,"column":33},"end":{"row":14,"column":0},"action":"remove","lines":["",""]}]}],[{"group":"doc","deltas":[{"start":{"row":13,"column":34},"end":{"row":13,"column":35},"action":"insert","lines":["{"]}]}],[{"group":"doc","deltas":[{"start":{"row":13,"column":35},"end":{"row":13,"column":36},"action":"insert","lines":["}"]}]}],[{"group":"doc","deltas":[{"start":{"row":13,"column":35},"end":{"row":15,"column":0},"action":"insert","lines":["","    ",""]}]}],[{"group":"doc","deltas":[{"start":{"row":14,"column":4},"end":{"row":91,"column":19},"action":"insert","lines":["var url = 'http://homepage.lnu.se/staff/tstjo/labbyServer/imgviewer/';","    var xhr = new XMLHttpRequest();","    //var windowBody = window.content;","    ","    // winMarginTop += 20;","    // winMarginLeft +=20;","    // this.window.style.marginTop=winMarginTop+'px';","    // this.window.style.marginLeft=winMarginLeft+'px';","    ","    // var openImage = function(thumbLink, imageURL){","    //     thumbLink.addEventListener('click', function(e){","    //         e.preventDefault();","    //         var win = new NS.Window();","    //         win.openWindow(type, imagesrc, zIndex, winMarginTop, winMarginLeft)","    //     });","    // };","","    var switchBG = function(thumbLink, imageURL){","        thumbLink.addEventListener('click', function(e){","            e.preventDefault();","            var body = document.getElementsByTagName(\"body\")[0];","            body.style.backgroundImage = 'url('+imageURL+')';","        });","    };","    ","    xhr.onreadystatechange = function(){","        var imageArray, i, j, thumbLink, thumb, thumbURL, load, imageURL;","        var maxWidth = 0;","        var maxHeight = 0;","        var thumbWidth, thumbHeight;","        ","        if (xhr.readyState === 4){","            if (xhr.status === 200){","                imageArray = JSON.parse(xhr.responseText);","","                for(j = 0; j < imageArray.length; j+=1){","                    thumbWidth = imageArray[j].thumbWidth;","                    thumbHeight = imageArray[j].thumbHeight;","                    if (thumbWidth > maxWidth) {","                        maxWidth = thumbWidth;","                    }","                    if (thumbHeight > maxHeight) {","                        maxHeight = thumbHeight;","                    }","                }","                ","                for (i = 0; i < imageArray.length; i+=1) {","                    //windowBody = this.content;","                    imageURL = imageArray[i].URL;","                    thumbURL = imageArray[i].thumbURL;","                    ","                    thumbLink = document.createElement('a');","                    thumbLink.setAttribute('class', 'thumbLink');","                    thumbLink.setAttribute('href', '#');","                    ","                    thumb = document.createElement('img');","                    thumb.setAttribute('src', thumbURL);","                    thumb.setAttribute('class', 'thumb');","","                    thumbLink.style.width = maxWidth+'px';","                    thumbLink.style.height = maxHeight+'px';","                    ","                    windowBody.appendChild(thumbLink);","                    thumbLink.appendChild(thumb);","                    ","                    switchBG(thumbLink, imageURL);","                    //openImage(thumbLink, imageURL, width, height);","                }","            }","            else {","                console.log('Läsfel, status: '+xhr.status);","            }","            load = window.footer.querySelector('.load');","            load.setAttribute('class', 'hidden');","        }","    }.bind(window); // gör att jag kan komma åt this uppifrån","    xhr.open(\"GET\", url, true); //Synkront = false (webbapplikation) | Asynkront = true (webbsida)","    xhr.send(null);"]}]}],[{"group":"doc","deltas":[{"start":{"row":94,"column":0},"end":{"row":94,"column":3},"action":"insert","lines":["// "]},{"start":{"row":95,"column":0},"end":{"row":95,"column":3},"action":"insert","lines":["// "]},{"start":{"row":96,"column":0},"end":{"row":96,"column":3},"action":"insert","lines":["// "]},{"start":{"row":97,"column":0},"end":{"row":97,"column":3},"action":"insert","lines":["// "]},{"start":{"row":99,"column":0},"end":{"row":99,"column":3},"action":"insert","lines":["// "]},{"start":{"row":100,"column":0},"end":{"row":100,"column":3},"action":"insert","lines":["// "]},{"start":{"row":101,"column":0},"end":{"row":101,"column":3},"action":"insert","lines":["// "]},{"start":{"row":102,"column":0},"end":{"row":102,"column":3},"action":"insert","lines":["// "]},{"start":{"row":104,"column":0},"end":{"row":104,"column":3},"action":"insert","lines":["// "]},{"start":{"row":105,"column":0},"end":{"row":105,"column":3},"action":"insert","lines":["// "]},{"start":{"row":106,"column":0},"end":{"row":106,"column":3},"action":"insert","lines":["// "]},{"start":{"row":107,"column":0},"end":{"row":107,"column":3},"action":"insert","lines":["// "]},{"start":{"row":108,"column":0},"end":{"row":108,"column":3},"action":"insert","lines":["// "]},{"start":{"row":109,"column":0},"end":{"row":109,"column":3},"action":"insert","lines":["// "]},{"start":{"row":110,"column":0},"end":{"row":110,"column":3},"action":"insert","lines":["// "]},{"start":{"row":112,"column":0},"end":{"row":112,"column":3},"action":"insert","lines":["// "]},{"start":{"row":113,"column":0},"end":{"row":113,"column":3},"action":"insert","lines":["// "]},{"start":{"row":114,"column":0},"end":{"row":114,"column":3},"action":"insert","lines":["// "]},{"start":{"row":115,"column":0},"end":{"row":115,"column":3},"action":"insert","lines":["// "]},{"start":{"row":116,"column":0},"end":{"row":116,"column":3},"action":"insert","lines":["// "]},{"start":{"row":117,"column":0},"end":{"row":117,"column":3},"action":"insert","lines":["// "]},{"start":{"row":118,"column":0},"end":{"row":118,"column":3},"action":"insert","lines":["// "]},{"start":{"row":120,"column":0},"end":{"row":120,"column":3},"action":"insert","lines":["// "]},{"start":{"row":121,"column":0},"end":{"row":121,"column":3},"action":"insert","lines":["// "]},{"start":{"row":122,"column":0},"end":{"row":122,"column":3},"action":"insert","lines":["// "]},{"start":{"row":123,"column":0},"end":{"row":123,"column":3},"action":"insert","lines":["// "]},{"start":{"row":124,"column":0},"end":{"row":124,"column":3},"action":"insert","lines":["// "]},{"start":{"row":126,"column":0},"end":{"row":126,"column":3},"action":"insert","lines":["// "]},{"start":{"row":127,"column":0},"end":{"row":127,"column":3},"action":"insert","lines":["// "]},{"start":{"row":128,"column":0},"end":{"row":128,"column":3},"action":"insert","lines":["// "]},{"start":{"row":130,"column":0},"end":{"row":130,"column":3},"action":"insert","lines":["// "]},{"start":{"row":131,"column":0},"end":{"row":131,"column":3},"action":"insert","lines":["// "]},{"start":{"row":132,"column":0},"end":{"row":132,"column":3},"action":"insert","lines":["// "]},{"start":{"row":133,"column":0},"end":{"row":133,"column":3},"action":"insert","lines":["// "]},{"start":{"row":134,"column":0},"end":{"row":134,"column":3},"action":"insert","lines":["// "]},{"start":{"row":135,"column":0},"end":{"row":135,"column":3},"action":"insert","lines":["// "]},{"start":{"row":136,"column":0},"end":{"row":136,"column":3},"action":"insert","lines":["// "]},{"start":{"row":137,"column":0},"end":{"row":137,"column":3},"action":"insert","lines":["// "]},{"start":{"row":138,"column":0},"end":{"row":138,"column":3},"action":"insert","lines":["// "]},{"start":{"row":139,"column":0},"end":{"row":139,"column":3},"action":"insert","lines":["// "]},{"start":{"row":141,"column":0},"end":{"row":141,"column":3},"action":"insert","lines":["// "]},{"start":{"row":142,"column":0},"end":{"row":142,"column":3},"action":"insert","lines":["// "]},{"start":{"row":143,"column":0},"end":{"row":143,"column":3},"action":"insert","lines":["// "]},{"start":{"row":144,"column":0},"end":{"row":144,"column":3},"action":"insert","lines":["// "]},{"start":{"row":146,"column":0},"end":{"row":146,"column":3},"action":"insert","lines":["// "]},{"start":{"row":147,"column":0},"end":{"row":147,"column":3},"action":"insert","lines":["// "]},{"start":{"row":148,"column":0},"end":{"row":148,"column":3},"action":"insert","lines":["// "]},{"start":{"row":150,"column":0},"end":{"row":150,"column":3},"action":"insert","lines":["// "]},{"start":{"row":151,"column":0},"end":{"row":151,"column":3},"action":"insert","lines":["// "]},{"start":{"row":152,"column":0},"end":{"row":152,"column":3},"action":"insert","lines":["// "]},{"start":{"row":154,"column":0},"end":{"row":154,"column":3},"action":"insert","lines":["// "]},{"start":{"row":155,"column":0},"end":{"row":155,"column":3},"action":"insert","lines":["// "]},{"start":{"row":157,"column":0},"end":{"row":157,"column":3},"action":"insert","lines":["// "]},{"start":{"row":158,"column":0},"end":{"row":158,"column":3},"action":"insert","lines":["// "]},{"start":{"row":160,"column":0},"end":{"row":160,"column":3},"action":"insert","lines":["// "]},{"start":{"row":161,"column":0},"end":{"row":161,"column":3},"action":"insert","lines":["// "]},{"start":{"row":162,"column":0},"end":{"row":162,"column":3},"action":"insert","lines":["// "]},{"start":{"row":163,"column":0},"end":{"row":163,"column":3},"action":"insert","lines":["// "]},{"start":{"row":164,"column":0},"end":{"row":164,"column":3},"action":"insert","lines":["// "]},{"start":{"row":165,"column":0},"end":{"row":165,"column":3},"action":"insert","lines":["// "]},{"start":{"row":166,"column":0},"end":{"row":166,"column":3},"action":"insert","lines":["// "]},{"start":{"row":167,"column":0},"end":{"row":167,"column":3},"action":"insert","lines":["// "]},{"start":{"row":168,"column":0},"end":{"row":168,"column":3},"action":"insert","lines":["// "]},{"start":{"row":169,"column":0},"end":{"row":169,"column":3},"action":"insert","lines":["// "]},{"start":{"row":170,"column":0},"end":{"row":170,"column":3},"action":"insert","lines":["// "]},{"start":{"row":171,"column":0},"end":{"row":171,"column":3},"action":"insert","lines":["// "]},{"start":{"row":172,"column":0},"end":{"row":172,"column":3},"action":"insert","lines":["// "]},{"start":{"row":173,"column":0},"end":{"row":173,"column":3},"action":"insert","lines":["// "]}]}],[{"group":"doc","deltas":[{"start":{"row":16,"column":0},"end":{"row":29,"column":9},"action":"remove","lines":["    //var windowBody = window.content;","    ","    // winMarginTop += 20;","    // winMarginLeft +=20;","    // this.window.style.marginTop=winMarginTop+'px';","    // this.window.style.marginLeft=winMarginLeft+'px';","    ","    // var openImage = function(thumbLink, imageURL){","    //     thumbLink.addEventListener('click', function(e){","    //         e.preventDefault();","    //         var win = new NS.Window();","    //         win.openWindow(type, imagesrc, zIndex, winMarginTop, winMarginLeft)","    //     });","    // };"]}]}],[{"group":"doc","deltas":[{"start":{"row":15,"column":35},"end":{"row":16,"column":0},"action":"remove","lines":["",""]}]}],[{"group":"doc","deltas":[{"start":{"row":13,"column":35},"end":{"row":14,"column":0},"action":"insert","lines":["",""]},{"start":{"row":14,"column":0},"end":{"row":14,"column":4},"action":"insert","lines":["    "]}]}],[{"group":"doc","deltas":[{"start":{"row":14,"column":4},"end":{"row":14,"column":60},"action":"insert","lines":["this.content = this.window.querySelector('.windowBody');"]}]}],[{"group":"doc","deltas":[{"start":{"row":48,"column":21},"end":{"row":48,"column":22},"action":"remove","lines":["/"]}]}],[{"group":"doc","deltas":[{"start":{"row":48,"column":20},"end":{"row":48,"column":21},"action":"remove","lines":["/"]}]}],[{"group":"doc","deltas":[{"start":{"row":48,"column":20},"end":{"row":48,"column":46},"action":"remove","lines":["windowBody = this.content;"]}]}],[{"group":"doc","deltas":[{"start":{"row":14,"column":60},"end":{"row":15,"column":0},"action":"insert","lines":["",""]},{"start":{"row":15,"column":0},"end":{"row":15,"column":4},"action":"insert","lines":["    "]}]}],[{"group":"doc","deltas":[{"start":{"row":15,"column":4},"end":{"row":15,"column":30},"action":"insert","lines":["windowBody = this.content;"]}]}],[{"group":"doc","deltas":[{"start":{"row":15,"column":4},"end":{"row":15,"column":5},"action":"insert","lines":["v"]}]}],[{"group":"doc","deltas":[{"start":{"row":15,"column":5},"end":{"row":15,"column":6},"action":"insert","lines":["a"]}]}],[{"group":"doc","deltas":[{"start":{"row":15,"column":6},"end":{"row":15,"column":7},"action":"insert","lines":["r"]}]}],[{"group":"doc","deltas":[{"start":{"row":15,"column":7},"end":{"row":15,"column":8},"action":"insert","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":9,"column":4},"end":{"row":9,"column":5},"action":"insert","lines":["/"]}]}],[{"group":"doc","deltas":[{"start":{"row":9,"column":5},"end":{"row":9,"column":6},"action":"insert","lines":["/"]}]}],[{"group":"doc","deltas":[{"start":{"row":0,"column":0},"end":{"row":161,"column":5},"action":"remove","lines":["'use strict';","var NS = NS || {};","","NS.GalleryWindow = function(window) {","    // this.content = window.content;","    // this.footer = window.footer;","    ","    console.log(window);","    NS.Window.call(this);","    //this.newGallery(window);","};","//NS.GalleryWindow.prototype = Object.create(Window.prototype);","","NS.GalleryWindow.body = function(){","    this.content = this.window.querySelector('.windowBody');","    var windowBody = this.content;","    var url = 'http://homepage.lnu.se/staff/tstjo/labbyServer/imgviewer/';","    var xhr = new XMLHttpRequest();","","    var switchBG = function(thumbLink, imageURL){","        thumbLink.addEventListener('click', function(e){","            e.preventDefault();","            var body = document.getElementsByTagName(\"body\")[0];","            body.style.backgroundImage = 'url('+imageURL+')';","        });","    };","    ","    xhr.onreadystatechange = function(){","        var imageArray, i, j, thumbLink, thumb, thumbURL, load, imageURL;","        var maxWidth = 0;","        var maxHeight = 0;","        var thumbWidth, thumbHeight;","        ","        if (xhr.readyState === 4){","            if (xhr.status === 200){","                imageArray = JSON.parse(xhr.responseText);","","                for(j = 0; j < imageArray.length; j+=1){","                    thumbWidth = imageArray[j].thumbWidth;","                    thumbHeight = imageArray[j].thumbHeight;","                    if (thumbWidth > maxWidth) {","                        maxWidth = thumbWidth;","                    }","                    if (thumbHeight > maxHeight) {","                        maxHeight = thumbHeight;","                    }","                }","                ","                for (i = 0; i < imageArray.length; i+=1) {","                    ","                    imageURL = imageArray[i].URL;","                    thumbURL = imageArray[i].thumbURL;","                    ","                    thumbLink = document.createElement('a');","                    thumbLink.setAttribute('class', 'thumbLink');","                    thumbLink.setAttribute('href', '#');","                    ","                    thumb = document.createElement('img');","                    thumb.setAttribute('src', thumbURL);","                    thumb.setAttribute('class', 'thumb');","","                    thumbLink.style.width = maxWidth+'px';","                    thumbLink.style.height = maxHeight+'px';","                    ","                    windowBody.appendChild(thumbLink);","                    thumbLink.appendChild(thumb);","                    ","                    switchBG(thumbLink, imageURL);","                    //openImage(thumbLink, imageURL, width, height);","                }","            }","            else {","                console.log('Läsfel, status: '+xhr.status);","            }","            load = window.footer.querySelector('.load');","            load.setAttribute('class', 'hidden');","        }","    }.bind(window); // gör att jag kan komma åt this uppifrån","    xhr.open(\"GET\", url, true); //Synkront = false (webbapplikation) | Asynkront = true (webbsida)","    xhr.send(null);","};","","// NS.GalleryWindow.prototype.newGallery = function(window){","//     var url = 'http://homepage.lnu.se/staff/tstjo/labbyServer/imgviewer/';","//     var xhr = new XMLHttpRequest();","//     //var windowBody = window.content;","    ","//     // winMarginTop += 20;","//     // winMarginLeft +=20;","//     // this.window.style.marginTop=winMarginTop+'px';","//     // this.window.style.marginLeft=winMarginLeft+'px';","    ","//     // var openImage = function(thumbLink, imageURL){","//     //     thumbLink.addEventListener('click', function(e){","//     //         e.preventDefault();","//     //         var win = new NS.Window();","//     //         win.openWindow(type, imagesrc, zIndex, winMarginTop, winMarginLeft)","//     //     });","//     // };","","//     var switchBG = function(thumbLink, imageURL){","//         thumbLink.addEventListener('click', function(e){","//             e.preventDefault();","//             var body = document.getElementsByTagName(\"body\")[0];","//             body.style.backgroundImage = 'url('+imageURL+')';","//         });","//     };","    ","//     xhr.onreadystatechange = function(){","//         var imageArray, i, j, thumbLink, thumb, thumbURL, load, imageURL;","//         var maxWidth = 0;","//         var maxHeight = 0;","//         var thumbWidth, thumbHeight;","        ","//         if (xhr.readyState === 4){","//             if (xhr.status === 200){","//                 imageArray = JSON.parse(xhr.responseText);","","//                 for(j = 0; j < imageArray.length; j+=1){","//                     thumbWidth = imageArray[j].thumbWidth;","//                     thumbHeight = imageArray[j].thumbHeight;","//                     if (thumbWidth > maxWidth) {","//                         maxWidth = thumbWidth;","//                     }","//                     if (thumbHeight > maxHeight) {","//                         maxHeight = thumbHeight;","//                     }","//                 }","                ","//                 for (i = 0; i < imageArray.length; i+=1) {","//                     //windowBody = this.content;","//                     imageURL = imageArray[i].URL;","//                     thumbURL = imageArray[i].thumbURL;","                    ","//                     thumbLink = document.createElement('a');","//                     thumbLink.setAttribute('class', 'thumbLink');","//                     thumbLink.setAttribute('href', '#');","                    ","//                     thumb = document.createElement('img');","//                     thumb.setAttribute('src', thumbURL);","//                     thumb.setAttribute('class', 'thumb');","","//                     thumbLink.style.width = maxWidth+'px';","//                     thumbLink.style.height = maxHeight+'px';","                    ","//                     windowBody.appendChild(thumbLink);","//                     thumbLink.appendChild(thumb);","                    ","//                     switchBG(thumbLink, imageURL);","//                     //openImage(thumbLink, imageURL, width, height);","//                 }","//             }","//             else {","//                 console.log('Läsfel, status: '+xhr.status);","//             }","//             load = window.footer.querySelector('.load');","//             load.setAttribute('class', 'hidden');","//         }","//     }.bind(window); // gör att jag kan komma åt this uppifrån","//     xhr.open(\"GET\", url, true); //Synkront = false (webbapplikation) | Asynkront = true (webbsida)","//     xhr.send(null);","// };"]},{"start":{"row":0,"column":0},"end":{"row":71,"column":2},"action":"insert","lines":["'use strict';","function Gallery(window) {","    this.content = window.content;","    this.footer = window.footer;","}","","Gallery.prototype.openGallery = function(){","    var url = 'http://homepage.lnu.se/staff/tstjo/labbyServer/imgviewer/';","    var xhr = new XMLHttpRequest();","    ","    var switchBG = function(thumbLink, imageURL){","        thumbLink.addEventListener('click', function(e){","            e.preventDefault();","            console.log('byt bakgrund på body');","            var body = document.getElementsByTagName(\"body\")[0];","            body.style.backgroundImage = 'url('+imageURL+')';","        });","    };","    ","    xhr.onreadystatechange = function(){","        var imageArray, i, j, thumbLink, thumb, thumbURL, load, windowBody, imageURL;","        var maxWidth = 0;","        var maxHeight = 0;","        var thumbWidth, thumbHeight;","        ","        if (xhr.readyState === 4){","            if (xhr.status === 200){","                imageArray = JSON.parse(xhr.responseText);","","                for(j = 0; j < imageArray.length; j+=1){","                    thumbWidth = imageArray[j].thumbWidth;","                    thumbHeight = imageArray[j].thumbHeight;","                    if (thumbWidth > maxWidth) {","                        maxWidth = thumbWidth;","                    }","                    if (thumbHeight > maxHeight) {","                        maxHeight = thumbHeight;","                    }","                }","                ","                for (i = 0; i < imageArray.length; i+=1) {","                    windowBody = this.content;","                    imageURL = imageArray[i].URL;","                    thumbURL = imageArray[i].thumbURL;","                    ","                    thumbLink = document.createElement('a');","                    thumbLink.setAttribute('class', 'thumbLink');","                    thumbLink.setAttribute('href', '#');","                    ","                    thumb = document.createElement('img');","                    thumb.setAttribute('src', thumbURL);","                    thumb.setAttribute('class', 'thumb');","","                    thumbLink.style.width = maxWidth+'px';","                    thumbLink.style.height = maxHeight+'px';","                    ","                    windowBody.appendChild(thumbLink);","                    thumbLink.appendChild(thumb);","                    ","                    switchBG(thumbLink, imageURL);","                }","            }","            else {","                console.log('Läsfel, status: '+xhr.status);","            }","            load = this.footer.querySelector('.load');","            load.setAttribute('class', 'hidden');","        }","    }.bind(this); // gör att jag kan komma åt this uppifrån","    xhr.open(\"GET\", url, true); //Synkront = false (webbapplikation) | Asynkront = true (webbsida)","    xhr.send(null);","};"]}]}],[{"group":"doc","deltas":[{"start":{"row":0,"column":13},"end":{"row":1,"column":0},"action":"insert","lines":["",""]}]}],[{"group":"doc","deltas":[{"start":{"row":1,"column":0},"end":{"row":1,"column":18},"action":"insert","lines":["var NS = NS || {};"]}]}],[{"group":"doc","deltas":[{"start":{"row":2,"column":0},"end":{"row":2,"column":9},"action":"remove","lines":["function "]},{"start":{"row":2,"column":0},"end":{"row":2,"column":1},"action":"insert","lines":["N"]}]}],[{"group":"doc","deltas":[{"start":{"row":2,"column":1},"end":{"row":2,"column":2},"action":"insert","lines":["S"]}]}],[{"group":"doc","deltas":[{"start":{"row":2,"column":2},"end":{"row":2,"column":3},"action":"insert","lines":["."]}]}],[{"group":"doc","deltas":[{"start":{"row":2,"column":10},"end":{"row":2,"column":11},"action":"insert","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":2,"column":11},"end":{"row":2,"column":12},"action":"insert","lines":["="]}]}],[{"group":"doc","deltas":[{"start":{"row":2,"column":12},"end":{"row":2,"column":13},"action":"insert","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":2,"column":13},"end":{"row":2,"column":14},"action":"insert","lines":["f"]}]}],[{"group":"doc","deltas":[{"start":{"row":2,"column":14},"end":{"row":2,"column":15},"action":"insert","lines":["u"]}]}],[{"group":"doc","deltas":[{"start":{"row":2,"column":15},"end":{"row":2,"column":16},"action":"insert","lines":["n"]}]}],[{"group":"doc","deltas":[{"start":{"row":2,"column":16},"end":{"row":2,"column":17},"action":"insert","lines":["c"]}]}],[{"group":"doc","deltas":[{"start":{"row":2,"column":17},"end":{"row":2,"column":18},"action":"insert","lines":["t"]}]}],[{"group":"doc","deltas":[{"start":{"row":2,"column":18},"end":{"row":2,"column":19},"action":"insert","lines":["i"]}]}],[{"group":"doc","deltas":[{"start":{"row":2,"column":19},"end":{"row":2,"column":20},"action":"insert","lines":["o"]}]}],[{"group":"doc","deltas":[{"start":{"row":2,"column":20},"end":{"row":2,"column":21},"action":"insert","lines":["n"]}]}],[{"group":"doc","deltas":[{"start":{"row":7,"column":0},"end":{"row":7,"column":1},"action":"insert","lines":["N"]}]}],[{"group":"doc","deltas":[{"start":{"row":7,"column":1},"end":{"row":7,"column":2},"action":"insert","lines":["S"]}]}],[{"group":"doc","deltas":[{"start":{"row":7,"column":2},"end":{"row":7,"column":3},"action":"insert","lines":["."]}]}],[{"group":"doc","deltas":[{"start":{"row":5,"column":1},"end":{"row":5,"column":2},"action":"insert","lines":[";"]}]}]]},"ace":{"folds":[],"scrolltop":881.5,"scrollleft":0,"selection":{"start":{"row":5,"column":2},"end":{"row":5,"column":2},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":50,"state":"start","mode":"ace/mode/javascript"}},"timestamp":1421668726819,"hash":"a6ed9f6bd443ab6d6004e375c9ab36df6c1bbed9"}